<app-page-title [title]="title" [breadcrumbItems]="breadcrumbItems"></app-page-title>

<div *ngIf="error" class="alert alert-danger mb-3">{{ error }}</div>

<div *ngIf="user && settings" class="card shadow-sm border-0">
  <!-- Barre d'onglets -->
  <div class="card-header bg-white border-bottom">
    <ul class="nav nav-tabs card-header-tabs">
      <li class="nav-item" *ngFor="let tab of tabs">
        <button 
          *ngIf="canShowTab(tab.id)"
          type="button"
          class="nav-link"
          [class.active]="activeTab === tab.id"
          (click)="setActiveTab(tab.id)">
          <i class="bi bi-{{tab.icon}} me-2"></i>
          {{ tab.label }}
        </button>
      </li>
    </ul>
  </div>

  <!-- Contenu des onglets -->
  <div class="card-body p-4">

    <!-- Compte -->
    <app-account-settings 
      *ngIf="activeTab === 'account'" 
      [settings]="user"
      (settingsUpdate)="handleUserUpdate($event)">
    </app-account-settings>

    <!-- Sécurité -->
    <app-security-settings 
      *ngIf="activeTab === 'security'" 
      [settings]="user"
      (settingsUpdate)="handleUserUpdate($event)">
    </app-security-settings>

    <!-- Notifications 
    <app-notification-settings 
      *ngIf="activeTab === 'notifications' && canShowTab('notifications')" 
      [settings]="user"
      (settingsUpdate)="handleUserUpdate($event)">
    </app-notification-settings>-->

    <!-- Réclamations -->
    <app-reclamation-settings 
      *ngIf="activeTab === 'reclamations' && canShowTab('reclamations')" 
      [settings]="settings"
      (settingsUpdate)="handleSettingsUpdate($event)">
    </app-reclamation-settings>
  </div>
</div>
