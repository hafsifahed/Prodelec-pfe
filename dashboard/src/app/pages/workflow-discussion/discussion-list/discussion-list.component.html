<!-- discussion-list.component.html -->
<div class="discussion-list">
  <div class="list-header">
    <h2>Discussions</h2>
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input type="text" placeholder="Rechercher...">
    </div>
  </div>

  <div class="list-content">
    <ng-container *ngIf="isLoading">
      <div class="skeleton-item" *ngFor="let i of [1,2,3,4,5]">
        <div class="skeleton-avatar"></div>
        <div class="skeleton-text">
          <div class="skeleton-line"></div>
          <div class="skeleton-line small"></div>
        </div>
      </div>
    </ng-container>

    <ng-container *ngIf="!isLoading && error">
      <div class="error-state">
        <i class="fas fa-exclamation-triangle"></i>
        <p>Erreur de chargement</p>
        <button (click)="loadDiscussions()">RÃ©essayer</button>
      </div>
    </ng-container>

    <ng-container *ngIf="!isLoading && !error && discussions.length === 0">
      <div class="empty-list">
        <i class="fas fa-inbox"></i>
        <p>Aucune discussion</p>
      </div>
    </ng-container>

    <div class="discussion-items">
      <div 
        *ngFor="let discussion of discussions"
        class="discussion-item"
        [class.active]="discussion.id === selectedDiscussionId"
        (click)="discussionSelected.emit(discussion.id)"
      >
        <div class="item-avatar">
          <div class="phase-indicator" [ngClass]="discussion.currentPhase"></div>
        </div>
        
        <div class="item-content">
          <div class="item-header">
            <h4>{{ getDiscussionTitle(discussion) }}</h4>
            <span class="item-time">
              {{ discussion.createdAt | date:'shortDate' }}
            </span>
          </div>
          
          <div class="item-preview">
            {{ getLastMessagePreview(discussion) }}
          </div>
          
          <div class="item-footer">
            <span class="badge" [ngClass]="discussion.currentPhase">
              {{ discussion.currentPhase | uppercase }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>