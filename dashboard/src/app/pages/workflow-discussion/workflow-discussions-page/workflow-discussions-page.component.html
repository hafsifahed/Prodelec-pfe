<div class="discussion-app-container" [class.mobile-view]="isMobileView">
  <div class="sidebar-section" [class.hidden]="isMobileView && selectedDiscussionId">
    <app-discussion-list 
      (discussionSelected)="onDiscussionSelected($event)"
      [selectedDiscussionId]="selectedDiscussionId">
    </app-discussion-list>
  </div>

  <div class="chat-section" *ngIf="selectedDiscussionId || !isMobileView">
    <ng-container *ngIf="selectedDiscussionId; else emptyState">
      <div class="chat-header">
        <button class="back-button" *ngIf="isMobileView" (click)="closeDiscussionView()">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h3>Conversation</h3>
      </div>
      <app-discussion-view [discussionId]="selectedDiscussionId"></app-discussion-view>
    </ng-container>
    
    <ng-template #emptyState>
      <div class="empty-chat">
        <div class="empty-illustration">
          <i class="fas fa-comments"></i>
        </div>
        <h3>Aucune conversation sélectionnée</h3>
        <p>Sélectionnez une discussion dans la liste pour afficher les messages</p>
      </div>
    </ng-template>
  </div>

  <!-- Rightbar pour les détails du workflow -->
  <div class="details-section" *ngIf="selectedDiscussionId && !isMobileView">
    <app-workflow-details-sidebar [discussion]="currentDiscussion"></app-workflow-details-sidebar>
  </div>
</div>