<!--<div class="container py-4" *ngIf="project">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-lg">
        <div class="card-header bg-primary text-white">
          <h2 class="mb-0">Détail du projet : {{ project?.refProdelec }}</h2>
        </div>
        <div class="card-body">

          //Informations générales 
          <ul class="list-group list-group-flush mb-4">
            <li class="list-group-item"><strong><i class="fas fa-user me-2"></i>Client :</strong> {{ project?.order?.user?.username }}</li>
            <li class="list-group-item"><strong><i class="fas fa-calendar-alt me-2"></i>Date Réception BC :</strong> {{ project?.order?.createdAt | date:'dd-MM-yyyy' }}</li>
            <li class="list-group-item"><strong><i class="fas fa-file-invoice me-2"></i>N° BC :</strong> {{ project?.order?.orderName }}</li>
            <li class="list-group-item"><strong><i class="fas fa-tag me-2"></i>Réf. Client :</strong> {{ project?.refClient }} - {{project?.order.user.partner.name}}</li>
            <li class="list-group-item"><strong><i class="fas fa-cubes me-2"></i>Quantité :</strong> {{ project?.qte }}</li>
            <li class="list-group-item">
              <strong><i class="fas fa-truck me-2"></i>Date de livraison prévue :</strong> 
              <span [ngClass]="{'text-danger': isDateOverdue(project?.dlp,project)}">
                {{ project?.dlp | date:'dd-MM-yyyy' }}
              </span>
            </li>
            <li class="list-group-item"><strong><i class="fas fa-clock me-2"></i>Durée :</strong> {{ project?.duree }} heures</li>
            <li class="list-group-item"><strong><i class="fas fa-calendar-plus me-2"></i>Date de création :</strong> {{ project?.createdAt | date:'short' }}</li>
            <li class="list-group-item"><strong><i class="fas fa-calendar-check me-2"></i>Date de mise à jour :</strong> {{ project?.updatedAt | date:'short' }}</li>
          </ul>

          // Progressions détaillées 
          <div class="row gy-3 mb-4">
          <h5 class="section-title"><i class="fas fa-tasks me-2"></i>Détail des Progressions</h5>

            // Fonction pour afficher chaque étape 
            <ng-container *ngFor="let step of ['conception', 'methode', 'production', 'finalControl', 'delivery']">
              <div class="col-md-6" [ngSwitch]="step">

                // Conception 
                <div *ngSwitchCase="'conception'">
                  <div class="mb-2 d-flex align-items-center justify-content-between">
                    <span>
                      <span *ngIf="project?.conceptionprogress > 0" class="badge" [ngClass]="project?.conceptionStatus ? 'bg-success' : 'bg-danger'">
                        {{ project?.conceptionStatus ? 'Conception : Terminé' : 'Conception : En cours' }}
                      </span>
                      <span *ngIf="isDateOverdue1(project?.endConception, project?.realendConception)" class="badge bg-warning ms-2">En retard</span>
                    </span>
                    <span>{{ project?.conceptionprogress.toFixed(2) }}%</span>
                  </div>
                  <div class="progress mb-1" style="height: 20px;">
                    <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.conceptionprogress + '%'" aria-valuenow="{{project?.conceptionprogress}}" aria-valuemin="0" aria-valuemax="100">
                      {{ project?.conceptionprogress.toFixed(2) }}%
                    </div>
                  </div>
                  <input *ngIf="(userr && project?.conceptionResponsible && project?.conceptionResponsible.id === userr.id) || userr.role?.name === 'SUBADMIN'"
                         type="range" min="0" max="100" [value]="project?.conceptionprogress"
                         (input)="updateConceptionProgress(project, $event)" class="form-range" aria-label="Progression conception" />
                  <div class="d-flex justify-content-center">
                    <button class="btn detail-custom" (click)="openPhaseDetailsModal(project, 'conception')">
                      <i class="bx bxs-detail" style="font-size: medium;"></i>
                    </button>
                  </div>
                </div>

                // Méthode 
                <div *ngSwitchCase="'methode'">
                  <div class="mb-2 d-flex align-items-center justify-content-between">
                    <span>
                      <span *ngIf="project?.methodeprogress > 0" class="badge" [ngClass]="project?.methodeStatus ? 'bg-success' : 'bg-danger'">
                        {{ project?.methodeStatus ? 'Méthode : Terminé' : 'Méthode : En cours' }}
                      </span>
                      <span *ngIf="isDateOverdue1(project?.endMethode, project?.realendMethode)" class="badge bg-warning ms-2">En retard</span>
                    </span>
                    <span>{{ project?.methodeprogress.toFixed(2) }}%</span>
                  </div>
                  <div class="progress mb-1" style="height: 20px;">
                    <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.methodeprogress + '%'" aria-valuenow="{{project?.methodeprogress}}" aria-valuemin="0" aria-valuemax="100">
                      {{ project?.methodeprogress.toFixed(2) }}%
                    </div>
                  </div>
                  <input *ngIf="(userr && project?.methodeResponsible && userr.id === project?.methodeResponsible.id) || userr.role?.name === 'SUBADMIN'"
                         type="range" min="0" max="100" [value]="project?.methodeprogress"
                         (input)="updatemProgress(project, $event)" class="form-range" aria-label="Progression méthode" />
                  <div class="d-flex justify-content-center">
                    <button class="btn detail-custom" (click)="openPhaseDetailsModal(project, 'methode')">
                      <i class="bx bxs-detail" style="font-size: medium;"></i>
                    </button>
                  </div>
                </div>

                // Production 
                <div *ngSwitchCase="'production'">
                  <div class="mb-2 d-flex align-items-center justify-content-between">
                    <span>
                      <span *ngIf="project?.productionprogress > 0" class="badge" [ngClass]="project?.productionStatus ? 'bg-success' : 'bg-danger'">
                        {{ project?.productionStatus ? 'Production : Terminé' : 'Production : En cours' }}
                      </span>
                      <span *ngIf="isDateOverdue1(project?.endProduction, project?.realendProduction)" class="badge bg-warning ms-2">En retard</span>
                    </span>
                    <span>{{ project?.productionprogress.toFixed(2) }}%</span>
                  </div>
                  <div class="progress mb-1" style="height: 20px;">
                    <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.productionprogress + '%'" aria-valuenow="{{project?.productionprogress}}" aria-valuemin="0" aria-valuemax="100">
                      {{ project?.productionprogress.toFixed(2) }}%
                    </div>
                  </div>
                  <input *ngIf="(userr && project?.productionResponsible && userr.id === project?.productionResponsible.id) || userr.role?.name === 'SUBADMIN'"
                         type="range" min="0" max="100" [value]="project?.productionprogress"
                         (input)="updatepProgress(project, $event)" class="form-range" aria-label="Progression production" />
                  <div class="d-flex justify-content-center">
                    <button class="btn detail-custom" (click)="openPhaseDetailsModal(project, 'production')">
                      <i class="bx bxs-detail" style="font-size: medium;"></i>
                    </button>
                  </div>
                </div>

                // Contrôle final 
                <div *ngSwitchCase="'finalControl'">
                  <div class="mb-2 d-flex align-items-center justify-content-between">
                    <span>
                      <span *ngIf="project?.fcprogress > 0" class="badge" [ngClass]="project?.finalControlStatus ? 'bg-success' : 'bg-danger'">
                        {{ project?.finalControlStatus ? 'Contrôle final : Terminé' : 'Contrôle final : En cours' }}
                      </span>
                      <span *ngIf="isDateOverdue1(project?.endFc, project?.realendFc)" class="badge bg-warning ms-2">En retard</span>
                    </span>
                    <span>{{ project?.fcprogress.toFixed(2) }}%</span>
                  </div>
                  <div class="progress mb-1" style="height: 20px;">
                    <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.fcprogress + '%'" aria-valuenow="{{project?.fcprogress}}" aria-valuemin="0" aria-valuemax="100">
                      {{ project?.fcprogress.toFixed(2) }}%
                    </div>
                  </div>
                  <input *ngIf="(userr && project?.finalControlResponsible && userr.id === project?.finalControlResponsible.id) || userr.role?.name === 'SUBADMIN'"
                         type="range" min="0" max="100" [value]="project?.fcprogress"
                         (input)="updatefcProgress(project, $event)" class="form-range" aria-label="Progression contrôle final" />
                  <div class="d-flex justify-content-center">
                    <button class="btn detail-custom" (click)="openPhaseDetailsModal(project, 'controle')">
                      <i class="bx bxs-detail" style="font-size: medium;"></i>
                    </button>
                  </div>
                </div>

                // Livraison 
                <div *ngSwitchCase="'delivery'">
                  <div class="mb-2 d-flex align-items-center justify-content-between">
                    <span>
                      <span *ngIf="project?.deliveryprogress > 0" class="badge" [ngClass]="project?.deliveryStatus ? 'bg-success' : 'bg-danger'">
                        {{ project?.deliveryStatus ? 'Livraison : Terminé' : 'Livraison : En cours' }}
                      </span>
                      <span *ngIf="isDateOverdue1(project?.endDelivery, project?.realendDelivery)" class="badge bg-warning ms-2">En retard</span>
                    </span>
                    <span>{{ project?.deliveryprogress.toFixed(2) }}%</span>
                  </div>
                  <div class="progress mb-1" style="height: 20px;">
                    <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.deliveryprogress + '%'" aria-valuenow="{{project?.deliveryprogress}}" aria-valuemin="0" aria-valuemax="100">
                      {{ project?.deliveryprogress.toFixed(2) }}%
                    </div>
                  </div>
                  <input *ngIf="(userr && project?.deliveryResponsible && userr.id === project?.deliveryResponsible.id) || userr.role?.name === 'SUBADMIN'"
                         type="range" min="0" max="100" [value]="project?.deliveryprogress"
                         (input)="updatedProgress(project, $event)" class="form-range" aria-label="Progression livraison" />
                  <div class="d-flex justify-content-center">
                    <button class="btn detail-custom" (click)="openPhaseDetailsModal(project, 'livraison')">
                      <i class="bx bxs-detail" style="font-size: medium;"></i>
                    </button>
                  </div>
                </div>

              </div>
            </ng-container>

            // Progression totale 
            <div class="col-md-6">
              <div class="mb-2 d-flex align-items-center justify-content-between">
                <span class="fw-bold">Progression totale</span>
                <span>{{ project?.progress.toFixed(2) }}%</span>
              </div>
              <div class="progress" style="height: 20px;">
                <div class="progress-bar bg-primary" role="progressbar" [style.width]="project?.progress + '%'" aria-valuenow="{{project?.progress}}" aria-valuemin="0" aria-valuemax="100">
                  {{ project?.progress.toFixed(2) }}%
                </div>
              </div>
            </div>

          </div>

          // Actions 
          <div class="d-flex flex-wrap gap-2 mt-4">
            <button class="btn btn-primary" (click)="openEditModal(project)">
              <i class="mdi mdi-pencil"></i> Modifier
            </button>
            <button class="btn btn-danger" (click)="delete(project?.idproject)">
              <i class="mdi mdi-delete"></i> Supprimer
            </button>
            <button class="btn btn-warning" (click)="archive(project?.idproject)">
              <i class="mdi mdi-archive"></i> Archiver
            </button>
            <button class="btn btn-success" (click)="openAddModal(project)">
              <i class="mdi mdi-plus"></i> Dupliquer
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
-->





  <div class="container py-4">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <!-- Header Card -->
                <div class="card shadow-lg mb-4">
                    <div class="card-header bg-primary text-white">
                        <div class="d-flex justify-content-between align-items-center">
                            <h2 class="mb-0"><i class="fas fa-project-diagram me-2"></i>Détail du projet</h2>
                            <span class="badge bg-light text-primary fs-6">{{ project?.refProdelec }}</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- Informations générales -->
                        <h5 class="section-title"><i class="fas fa-info-circle me-2"></i>Informations générales</h5>
                        <div class="info-card">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-user me-2 text-primary"></i>Client :</strong> 
                                            <span>{{ project?.order?.user?.username }}</span>
                                        </li>
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-calendar-alt me-2 text-primary"></i>Date Réception BC :</strong> 
                                            <span>{{ project?.order?.createdAt | date:'dd-MM-yyyy' }}</span>
                                        </li>
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-file-invoice me-2 text-primary"></i>N° BC :</strong> 
                                            <span>{{ project?.order?.orderName }}</span>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-tag me-2 text-primary"></i>Réf. Client :</strong> 
                                            <span>{{ project?.refClient }} - {{project?.order.user.partner.name}}</span>
                                        </li>
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-cubes me-2 text-primary"></i>Quantité :</strong> 
                                            <span>{{ project?.qte }}</span>
                                        </li>
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-clock me-2 text-primary"></i>Durée :</strong> 
                                            <span>{{ project?.duree }} heures</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Dates importantes -->
                        <h5 class="section-title"><i class="fas fa-calendar-day me-2"></i>Dates importantes</h5>
                        <div class="info-card">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-truck me-2 text-primary"></i>Date de livraison prévue :</strong> 
                                            <span [ngClass]="{'overdue': isDateOverdue(project?.dlp,project)}">
                                                {{ project?.dlp | date:'dd-MM-yyyy' }}
                                                <i [ngClass]="{'text-danger': isDateOverdue(project?.dlp,project)}" *ngIf="isDateOverdue(project?.dlp,project)" class="fas fa-exclamation-triangle ms-1"></i>
                                            </span>
                                            
                                        </li>
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-calendar-plus me-2 text-primary"></i>Date de création :</strong> 
                                            <span>{{ project?.createdAt | date:'short' }}</span>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <strong><i class="fas fa-history me-2 text-primary"></i>Dernière mise à jour :</strong> 
                                            <span>{{ project?.updatedAt | date:'short' }}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Progressions détaillées -->
                        <h5 class="section-title"><i class="fas fa-tasks me-2"></i>Avancement du projet</h5>
                        <div class="progress-container">
                            <div class="row gy-4">
                                <!-- Progression totale -->
                                <div class="col-12">
                                    <div class="phase-card">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <h6 class="mb-0"><i class="fas fa-chart-line me-2 text-primary"></i>Progression totale du projet</h6>
                                            <span class="fw-bold fs-5">{{ project?.progress.toFixed(2) }}%</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-primary" role="progressbar" [style.width]="project?.progress + '%'">
                                                {{ project?.progress.toFixed(2) }}%
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Fonction pour afficher chaque étape -->
                                <ng-container *ngFor="let step of ['conception', 'methode', 'production', 'finalControl', 'delivery']">
                                    <div class="col-md-6" [ngSwitch]="step">
                                        <!-- Conception -->
                                        <div *ngSwitchCase="'conception'" class="phase-card">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <div>
                                                    <h6 class="mb-0"><i class="fas fa-pencil-ruler me-2 text-info"></i>Conception</h6>
                                                    <div class="mt-1">
                                                        <span *ngIf="project?.conceptionprogress > 0" class="badge" [ngClass]="project?.conceptionStatus ? 'bg-success' : 'bg-info'">
                                                            {{ project?.conceptionStatus ? 'Terminé' : 'En cours' }}
                                                        </span>
                                                        <span *ngIf="isDateOverdue1(project?.endConception, project?.realendConception)" class="badge bg-warning ms-1">En retard</span>
                                                    </div>
                                                </div>
                                                <span class="fw-bold">{{ project?.conceptionprogress.toFixed(2) }}%</span>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.conceptionprogress + '%'">
                                                    {{ project?.conceptionprogress.toFixed(2) }}%
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center mt-2">
                                                <input *ngIf="(userr && project?.conceptionResponsible && project?.conceptionResponsible.id === userr.id) || userr.role?.name === 'SUBADMIN'"
                                                       type="range" min="0" max="100" [value]="project?.conceptionprogress"
                                                       (input)="updateConceptionProgress(project, $event)" class="form-range w-75" />
                                                <button class="btn detail-btn" (click)="openPhaseDetailsModal(project, 'conception')" title="Voir les détails">
                                                    <i class="bx bxs-detail me-1"></i> Détails
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Méthode -->
                                        <div *ngSwitchCase="'methode'" class="phase-card">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <div>
                                                    <h6 class="mb-0"><i class="fas fa-cogs me-2 text-info"></i>Méthode</h6>
                                                    <div class="mt-1">
                                                        <span *ngIf="project?.methodeprogress > 0" class="badge" [ngClass]="project?.methodeStatus ? 'bg-success' : 'bg-info'">
                                                            {{ project?.methodeStatus ? 'Terminé' : 'En cours' }}
                                                        </span>
                                                        <span *ngIf="isDateOverdue1(project?.endMethode, project?.realendMethode)" class="badge bg-warning ms-1">En retard</span>
                                                    </div>
                                                </div>
                                                <span class="fw-bold">{{ project?.methodeprogress.toFixed(2) }}%</span>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.methodeprogress + '%'">
                                                    {{ project?.methodeprogress.toFixed(2) }}%
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center mt-2">
                                                <input *ngIf="(userr && project?.methodeResponsible && userr.id === project?.methodeResponsible.id) || userr.role?.name === 'SUBADMIN'"
                                                       type="range" min="0" max="100" [value]="project?.methodeprogress"
                                                       (input)="updatemProgress(project, $event)" class="form-range w-75" />
                                                <button class="btn detail-btn" (click)="openPhaseDetailsModal(project, 'methode')" title="Voir les détails">
                                                    <i class="bx bxs-detail me-1"></i> Détails
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Production -->
                                        <div *ngSwitchCase="'production'" class="phase-card">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <div>
                                                    <h6 class="mb-0"><i class="fas fa-industry me-2 text-info"></i>Production</h6>
                                                    <div class="mt-1">
                                                        <span *ngIf="project?.productionprogress > 0" class="badge" [ngClass]="project?.productionStatus ? 'bg-success' : 'bg-info'">
                                                            {{ project?.productionStatus ? 'Terminé' : 'En cours' }}
                                                        </span>
                                                        <span *ngIf="isDateOverdue1(project?.endProduction, project?.realendProduction)" class="badge bg-warning ms-1">En retard</span>
                                                    </div>
                                                </div>
                                                <span class="fw-bold">{{ project?.productionprogress.toFixed(2) }}%</span>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.productionprogress + '%'">
                                                    {{ project?.productionprogress.toFixed(2) }}%
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center mt-2">
                                                <input *ngIf="(userr && project?.productionResponsible && userr.id === project?.productionResponsible.id) || userr.role?.name === 'SUBADMIN'"
                                                       type="range" min="0" max="100" [value]="project?.productionprogress"
                                                       (input)="updatepProgress(project, $event)" class="form-range w-75" />
                                                <button class="btn detail-btn" (click)="openPhaseDetailsModal(project, 'production')" title="Voir les détails">
                                                    <i class="bx bxs-detail me-1"></i> Détails
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Contrôle final -->
                                        <div *ngSwitchCase="'finalControl'" class="phase-card">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <div>
                                                    <h6 class="mb-0"><i class="fas fa-check-circle me-2 text-info"></i>Contrôle final</h6>
                                                    <div class="mt-1">
                                                        <span *ngIf="project?.fcprogress > 0" class="badge" [ngClass]="project?.finalControlStatus ? 'bg-success' : 'bg-info'">
                                                            {{ project?.finalControlStatus ? 'Terminé' : 'En cours' }}
                                                        </span>
                                                        <span *ngIf="isDateOverdue1(project?.endFc, project?.realendFc)" class="badge bg-warning ms-1">En retard</span>
                                                    </div>
                                                </div>
                                                <span class="fw-bold">{{ project?.fcprogress.toFixed(2) }}%</span>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.fcprogress + '%'">
                                                    {{ project?.fcprogress.toFixed(2) }}%
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center mt-2">
                                                <input *ngIf="(userr && project?.finalControlResponsible && userr.id === project?.finalControlResponsible.id) || userr.role?.name === 'SUBADMIN'"
                                                       type="range" min="0" max="100" [value]="project?.fcprogress"
                                                       (input)="updatefcProgress(project, $event)" class="form-range w-75" />
                                                <button class="btn detail-btn" (click)="openPhaseDetailsModal(project, 'controle')" title="Voir les détails">
                                                    <i class="bx bxs-detail me-1"></i> Détails
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Livraison -->
                                        <div *ngSwitchCase="'delivery'" class="phase-card">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <div>
                                                    <h6 class="mb-0"><i class="fas fa-truck-loading me-2 text-info"></i>Livraison</h6>
                                                    <div class="mt-1">
                                                        <span *ngIf="project?.deliveryprogress > 0" class="badge" [ngClass]="project?.deliveryStatus ? 'bg-success' : 'bg-info'">
                                                            {{ project?.deliveryStatus ? 'Terminé' : 'En cours' }}
                                                        </span>
                                                        <span *ngIf="isDateOverdue1(project?.endDelivery, project?.realendDelivery)" class="badge bg-warning ms-1">En retard</span>
                                                    </div>
                                                </div>
                                                <span class="fw-bold">{{ project?.deliveryprogress.toFixed(2) }}%</span>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar" [style.width]="project?.deliveryprogress + '%'">
                                                    {{ project?.deliveryprogress.toFixed(2) }}%
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center mt-2">
                                                <input *ngIf="(userr && project?.deliveryResponsible && userr.id === project?.deliveryResponsible.id) || userr.role?.name === 'SUBADMIN'"
                                                       type="range" min="0" max="100" [value]="project?.deliveryprogress"
                                                       (input)="updatedProgress(project, $event)" class="form-range w-75" />
                                                <button class="btn detail-btn" (click)="openPhaseDetailsModal(project, 'livraison')" title="Voir les détails">
                                                    <i class="bx bxs-detail me-1"></i> Détails
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>

                        <!-- Actions -->
                        <h5 *ngIf="userStateService.isWorker()" class="section-title"><i class="fas fa-cogs me-2"></i>Actions</h5>
                        <div class="d-flex flex-wrap gap-3 mt-3">
                            <button *ngIf="userStateService.isWorker() && userStateService.hasAnyPermission(Resource.PROJECT, [Action.MANAGE , Action.UPDATE])"
                             class="btn btn-primary btn-action" (click)="openEditModal(project)">
                                <i class="fas fa-edit me-1"></i> Modifier
                            </button>
                            <button *ngIf="userStateService.isWorker() && userStateService.hasAnyPermission(Resource.PROJECT, [Action.MANAGE , Action.DELETE])"
                            class="btn btn-danger btn-action" (click)="delete(project?.idproject)">
                                <i class="fas fa-trash-alt me-1"></i> Supprimer
                            </button>
                            <button *ngIf="userStateService.isWorker() && userStateService.hasAnyPermission(Resource.PROJECT, [Action.MANAGE])"
                            class="btn btn-warning btn-action" (click)="archive(project?.idproject)">
                                <i class="fas fa-archive me-1"></i> Archiver
                            </button>
                            <button *ngIf="userStateService.isWorker() && userStateService.hasAnyPermission(Resource.PROJECT, [Action.MANAGE , Action.CREATE])"
                            class="btn btn-success btn-action" (click)="openAddModal(project)">
                                <i class="fas fa-copy me-1"></i> Dupliquer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    